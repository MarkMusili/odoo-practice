<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <record id="action_hospital_consultation" model="ir.actions.act_window">
            <field name="name">EMR</field>
            <field name="res_model">hospital.consultation</field>
            <field name="view_mode">list,form</field>
        </record>

        <record id="hospital_consultation_list_view" model="ir.ui.view">
            <field name="name">hospital.consultation.tree</field>
            <field name="model">hospital.consultation</field>
            <field name="arch" type="xml">
                <list create="false" string="Electronic Medical Records"
                        decoration-muted="state == 'draft'"
                        decoration-info="state == 'in_progress'"
                        decoration-success="state == 'done'">
                    <field name="name" string="Title"/>
                    <field name="patient_id" string="Patient"/>
                    <field name="doctor_id" string="Doctor"/>
                    <field name="date" string="Date"/>
                    <field name="state" string="Status" widget="badge"
                        decoration-muted="state == 'draft'"
                        decoration-info="state == 'in_progress'"
                        decoration-success="state == 'done'"/>
                </list>
            </field>
        </record>

        <record id="hospital_consultation_form_view" model="ir.ui.view">
            <field name="name">hospital.consultation.form</field>
            <field name="model">hospital.consultation</field>
            <field name="arch" type="xml">
                <form create="false" string="Electronic Medical Record">
                    <header>
                        <button name="done" string="Mark Done" type="object" class="btn-success" invisible="state == 'done'"/>
                        <button name="reset" string="Reset" type="object" class="btn-warning" invisible="state == 'in_progress'"/>
                        <button name="generate_invoice" string="Invoice" type="object" class="btn-info" invisible="state in ('draft','in_progress')"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,in_progress,done"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="name" string="Title"/>
                                <field name="patient_id" string="Patient"/>
                                <field name="doctor_id" string="Doctor"/>
                                <field name="date" string="Date"/>
                            </group>
                            <group>
                                <field name="symptoms" string="Patient Symptoms"/>
                                <field name="diagnosis" string="Diagnosis"/>
                                <field name="treatment_plan" string="Summary of Treatment"/>
                            </group>
                            <notebook>
                                <page string="Doctor's Notes">
                                    <field name="notes" string="Notes"/>
                                </page>
                            </notebook>
                        </group>
                    </sheet>
                    <chatter open_attachments="True"/>
                </form>
            </field>
        </record>
    </data>
</odoo>